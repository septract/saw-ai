// SAW verification of max function
// Proves that max(a,b) >= a and max(a,b) >= b for all uint32 values

m <- llvm_load_module "max.bc";

let max_spec = do {
    a <- llvm_fresh_var "a" (llvm_int 32);
    b <- llvm_fresh_var "b" (llvm_int 32);

    llvm_execute_func [llvm_term a, llvm_term b];

    let result = {{ if a > b then a else b }};
    llvm_return (llvm_term result);
};

llvm_verify m "max" [] false max_spec z3;

print "max function verified!";
